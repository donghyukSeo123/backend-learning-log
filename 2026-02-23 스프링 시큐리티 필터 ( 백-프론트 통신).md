# 2026-02-23 – 백엔드 보안 강화: Spring Security 필터 및 JWT 인증 시스템 구축

## 오늘 한 것
- **JWT 인증 필터(JwtAuthenticationFilter) 구현**: 모든 HTTP 요청을 가로채 토큰의 유효성을 검사하는 전용 문지기 로직 구축.
- **Spring Security 설정(SecurityConfig) 최적화**: `.anyRequest().authenticated()` 설정을 통해 보호 구역을 지정하고, 커스텀 필터를 기존 보안 체인에 등록.
- **Axios 인터셉터(Interceptor) 도입**: 리액트에서 서버로 요청을 보낼 때마다 `localStorage`의 토큰을 자동으로 헤더에 실어 보내는 자동화 시스템 구축.
- **Stateless 인증 구조 확립**: 서버가 유저의 상태를 기억하지 않고(Session-less), 오직 토큰(Token) 하나로 신분을 확인하는 현대적 아키텍처 적용.
- **프론트-백 인증 연동 테스트**: 로그인 시 발급받은 토큰이 프로젝트 생성(`createProject`) API 호출 시 정상적으로 검증되는지 확인.

## 오늘 알게 된 것
- **OncePerRequestFilter**: 요청당 한 번만 실행되는 필터의 특성을 이용하여, 중복 검사를 방지하고 효율적인 인증 처리가 가능하다는 점.
- **Security Context**: 인증에 성공한 유저 정보를 담는 '합격 목걸이' 보관함의 역할과, 이를 통해 컨트롤러에서 유저 정보를 꺼내 쓰는 원리.
- **Preflight 요청(CORS)**: 실제 데이터 전송 전 브라우저가 서버의 허락을 구하는 과정과, 이때 보안 필터가 어떻게 반응해야 하는지에 대한 이해.
- **ReferenceError 방지**: 자바스크립트에서 변수를 사용하기 전 반드시 선언(`const`, `let`)해야 함과 `JSON.parse`를 통한 토큰 정제 작업의 중요성.

---

## 🧠 오늘의 개념

### 🛡️ 스프링 시큐리티 필터 (Spring Security Filter)
- **목적**: 요청이 API 컨트롤러에 도달하기 전, 보안 검사를 수행하여 비인가 사용자를 차단함.
- **작동 원리**: 
  - `addFilterBefore`를 통해 표준 로그인 필터보다 먼저 토큰 검사를 수행하도록 설정.
  - 유효한 토큰일 경우 서버 내부에 '임시 합격증(Authentication 객체)'을 발급함.



### 🎫 JWT (JSON Web Token) 인증 프로세스
- **토큰 발행**: 로그인 성공 시 서버가 유저 ID를 담은 암호화된 티켓을 발행.
- **토큰 검증**: 필터가 `Authorization` 헤더의 `Bearer ` 뒤에 붙은 토큰을 추출하여 서버의 비밀키로 위변조 여부를 확인.

### ⚡ Axios 요청 인터셉터 (Request Interceptor)
- **정의**: 브라우저에서 서버로 향하는 모든 통신을 중간에 낚아채서 특정 작업을 수행하는 코드.
- **활용**: 매번 수동으로 토큰을 헤더에 넣는 번거로움을 해결하고, 모든 API 요청에 자동으로 `Authorization` 헤더를 추가함.

### 🔑 JSON.parse vs JSON.stringify
- **stringify**: 객체를 로컬 스토리지에 저장하기 위해 '따옴표가 포함된 문자열'로 변환.
- **parse**: 저장된 문자열에서 따옴표를 벗기고 실제 데이터(토큰 값)만 추출하여 서버가 인식 가능한 형태로 복구. (ReferenceError 방지의 핵심)

---

### 📌 요약
- **스프링 시큐리티 필터**를 통해 백엔드 입구에 깐깐한 문지기를 세우고, **Axios 인터셉터**를 통해 리액트에서 티켓(토큰)을 자동으로 제시하도록 설정함.
- 이제 **컨텐츠메이커스튜디오**는 로그인한 정회원만 프로젝트를 생성하고 관리할 수 있는 안전하고 견고한 **보안 인프라**를 갖추게 됨.
